import React, { useState, useEffect } from 'react';
import {
Megaphone,
Target,
Image as ImageIcon,
Copy,
Check,
Sparkles,
RefreshCw,
Eye,
Video,
Layout,
Code2,
Palette,
MonitorPlay
} from 'lucide-react';

const App = () => {
const [activeTab, setActiveTab] = useState('strategy');
const [generating, setGenerating] = useState(false);
const [generatedImage, setGeneratedImage] = useState(null);
const [copyFeedback, setCopyFeedback] = useState('');
const [error, setError] = useState(null);

// Constants
const BRAND_COLORS = {
green: '#228B22',
cream: '#F5F5DC',
darkGreen: '#1a6b1a'
};

const adCampaigns = [
{
id: 'lish-agency',
title: 'LISH Agency - Full Stack Dev',
primaryText: "Stop settling for 'good enough' web presence. At LISH, we build high-performance, full-stack solutions
that turn visitors into customers. From custom PHP backends to sleek React frontends, we engineer growth.",
headline: "Your Digital Identity, Engineered by LISH",
cta: "Book a Consultation",
targeting: "Business Owners, Tech Founders, Digital Marketing Managers (Ages 25-55)",
videoScript: [
{ time: "0-2s", visual: "Solid Green screen with 'LISH' in Cream text. Sharp, clean entry.", audio: "Looking for a
website that actually works?" },
{ time: "2-6s", visual: "Rapid scrolling of Pathfinder AI and MC Beverly Hills screenshots over Cream background.",
audio: "We build intelligence-driven platforms and corporate identities." },
{ time: "6-10s", visual: "PHP and JavaScript code snippets appearing like digital architecture.", audio: "From custom
backends to high-converting frontends." },
{ time: "10-15s", visual: "LISH logo with 'Let's Build' call to action. Solid Green & Cream.", audio: "LISH. Your
growth, engineered. Click below." }
]
},
{
id: 'pathfinder-ai',
title: 'Pathfinder AI - Career Tool',
primaryText: "The corporate world is a maze. Pathfinder AI is your map. Navigate your career with intelligence-driven
insights tailored for professionals who want to reach the top faster.",
headline: "Master Your Career Path with AI",
cta: "Try Pathfinder AI",
targeting: "Corporate Employees, HR Professionals, MBA Students, Career Switchers",
videoScript: [
{ time: "0-3s", visual: "AI network nodes appearing in solid green on cream.", audio: "Stop guessing your next career
move." },
{ time: "3-8s", visual: "Pathfinder AI dashboard preview showing career navigation features.", audio: "Get
intelligence-driven insights to navigate the corporate maze." },
{ time: "8-12s", visual: "Success metrics and growth charts in solid green.", audio: "Reach your goals faster with
Pathfinder AI." },
{ time: "12-15s", visual: "Pathfinder AI logo and 'Sign Up Free' button.", audio: "Start your journey today. Click learn
more." }
]
}
];

const [selectedAd, setSelectedAd] = useState(adCampaigns[0]);

const handleCopy = (text) => {
const el = document.createElement('textarea');
el.value = text;
document.body.appendChild(el);
el.select();
document.execCommand('copy');
document.body.removeChild(el);
setCopyFeedback('Copied!');
setTimeout(() => setCopyFeedback(''), 2000);
};

const generateImage = async () => {
setGenerating(true);
setError(null);
const apiKey = "";

const prompt = `A professional, minimalist high-resolution graphic for a full-stack development agency ad. Palette of
solid forest green (#228B22) and vibrant cream (#F5F5DC). Clean UI components from high-end websites, sharp typography,
and snippets of PHP and JavaScript code. No gradients, no shadows. High-quality corporate tech aesthetic, bright and
airy. LISH logo integration.`;

const fetchWithRetry = async (retries = 5, delay = 1000) => {
try {
const response = await
fetch(`https://generativelanguage.googleapis.com/v1beta/models/imagen-4.0-generate-001:predict?key=${apiKey}`, {
method: 'POST',
headers: { 'Content-Type': 'application/json' },
body: JSON.stringify({
instances: [{ prompt }],
parameters: { sampleCount: 1 }
})
});

if (!response.ok) throw new Error('Generation failed');
const result = await response.json();
return `data:image/png;base64,${result.predictions[0].bytesBase64Encoded}`;
} catch (err) {
if (retries > 0) {
await new Promise(res => setTimeout(res, delay));
return fetchWithRetry(retries - 1, delay * 2);
}
throw err;
}
};

try {
const imageUrl = await fetchWithRetry();
setGeneratedImage(imageUrl);
} catch (err) {
setError("Unable to generate image at this moment. Please try again.");
} finally {
setGenerating(false);
}
};

return (
<div className="min-h-screen bg-[#FDFDF8] text-gray-800 font-sans p-4 md:p-8">
    {/* Header */}
    <header className="max-w-6xl mx-auto flex flex-col md:flex-row justify-between items-center mb-12 gap-4">
        <div className="flex items-center gap-3">
            <div
                className="w-12 h-12 bg-[#228B22] rounded-lg flex items-center justify-center text-white font-bold text-2xl shadow-sm">
                L</div>
            <div>
                <h1 className="text-2xl font-bold text-[#1a6b1a]">LISH Ad Studio</h1>
                <p className="text-sm text-gray-500 italic">Musibau Bamidele Samson • Full-Stack Engineer</p>
            </div>
        </div>

        <nav className="flex bg-white rounded-full p-1 shadow-sm border border-gray-100 overflow-x-auto">
            {['strategy', 'video', 'creative'].map((tab) => (
            <button key={tab} onClick={()=> setActiveTab(tab)}
                className={`px-6 py-2 rounded-full text-sm font-medium transition-all capitalize whitespace-nowrap
                ${activeTab === tab ? 'bg-[#228B22] text-white shadow-md' : 'text-gray-500 hover:bg-gray-50'}`}
                >
                {tab === 'video' ? 'Video Ad' : tab === 'creative' ? 'Static Creative' : 'Ad Strategy'}
            </button>
            ))}
        </nav>
    </header>

    <main className="max-w-6xl mx-auto">
        {activeTab === 'strategy' && (
        <div className="grid grid-cols-1 lg:grid-cols-12 gap-8">
            <div className="lg:col-span-7 space-y-6">
                <section className="bg-white p-6 rounded-2xl shadow-sm border border-gray-100">
                    <div className="flex items-center gap-2 mb-4">
                        <Megaphone className="text-[#228B22] w-5 h-5" />
                        <h2 className="text-lg font-semibold">Select Campaign Objective</h2>
                    </div>
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                        {adCampaigns.map((ad) => (
                        <button key={ad.id} onClick={()=> setSelectedAd(ad)}
                            className={`p-4 rounded-xl text-left border-2 transition-all ${selectedAd.id === ad.id ?
                            'border-[#228B22] bg-green-50' : 'border-gray-100 hover:border-gray-200'}`}
                            >
                            <h3 className="font-bold text-sm mb-1">{ad.title}</h3>
                            <p className="text-xs text-gray-500 line-clamp-2">{ad.primaryText}</p>
                        </button>
                        ))}
                    </div>
                </section>

                <section className="bg-white p-6 rounded-2xl shadow-sm border border-gray-100">
                    <div className="flex items-center justify-between mb-4">
                        <div className="flex items-center gap-2">
                            <Target className="text-[#228B22] w-5 h-5" />
                            <h2 className="text-lg font-semibold">Ad Copy & Targeting</h2>
                        </div>
                        <button onClick={()=> handleCopy(`${selectedAd.primaryText}\n\n${selectedAd.headline}`)}
                            className="text-xs text-[#228B22] hover:underline flex items-center gap-1"
                            >
                            {copyFeedback ?
                            <Check size={14} /> :
                            <Copy size={14} />}
                            {copyFeedback || 'Copy All Text'}
                        </button>
                    </div>

                    <div className="space-y-4">
                        <div>
                            <label className="text-xs font-bold text-gray-400 uppercase tracking-wider">Primary
                                Text</label>
                            <p
                                className="mt-1 p-3 bg-gray-50 rounded-lg text-sm leading-relaxed border border-gray-100">
                                {selectedAd.primaryText}</p>
                        </div>
                        <div>
                            <label className="text-xs font-bold text-gray-400 uppercase tracking-wider">Headline</label>
                            <p className="mt-1 p-3 bg-gray-50 rounded-lg text-sm font-semibold border border-gray-100">
                                {selectedAd.headline}</p>
                        </div>
                        <div className="p-3 bg-[#F5F5DC] rounded-lg border border-[#e8e8c8]">
                            <label className="text-xs font-bold text-green-800 uppercase tracking-wider">Targeting
                                Recommendation</label>
                            <p className="mt-1 text-sm text-green-900 font-medium">{selectedAd.targeting}</p>
                        </div>
                    </div>
                </section>
            </div>

            <div className="lg:col-span-5">
                <section className="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 h-full">
                    <div className="flex items-center gap-2 mb-4">
                        <Palette className="text-[#228B22] w-5 h-5" />
                        <h2 className="text-lg font-semibold">Branding Guardrails</h2>
                    </div>
                    <div className="space-y-6">
                        <div className="flex items-center gap-4">
                            <div className="w-16 h-16 rounded-xl bg-[#228B22] shadow-inner"></div>
                            <div>
                                <h3 className="font-bold text-sm">Forest Green (#228B22)</h3>
                                <p className="text-xs text-gray-500">Represents growth and precision.</p>
                            </div>
                        </div>
                        <div className="flex items-center gap-4">
                            <div className="w-16 h-16 rounded-xl bg-[#F5F5DC] border border-gray-200"></div>
                            <div>
                                <h3 className="font-bold text-sm">Solid Cream (#F5F5DC)</h3>
                                <p className="text-xs text-gray-500">Premium foundation color.</p>
                            </div>
                        </div>
                        <div className="pt-4 border-t border-gray-100">
                            <h4 className="text-sm font-bold mb-2">Technical Palette:</h4>
                            <div className="flex gap-2 mb-4">
                                <span className="bg-[#228B22] text-white text-[10px] px-2 py-1 rounded">PHP</span>
                                <span className="bg-[#228B22] text-white text-[10px] px-2 py-1 rounded">C#</span>
                                <span className="bg-[#228B22] text-white text-[10px] px-2 py-1 rounded">React</span>
                            </div>
                            <ul className="text-xs space-y-2 text-gray-600">
                                <li className="flex items-center gap-2">
                                    <Check size={14} className="text-[#228B22]" /> No Gradients
                                </li>
                                <li className="flex items-center gap-2">
                                    <Check size={14} className="text-[#228B22]" /> No Shadows / Flat Design
                                </li>
                                <li className="flex items-center gap-2">
                                    <Check size={14} className="text-[#228B22]" /> High-Visibility Content
                                </li>
                            </ul>
                        </div>
                    </div>
                </section>
            </div>
        </div>
        )}

        {activeTab === 'video' && (
        <div className="grid grid-cols-1 lg:grid-cols-12 gap-8">
            <div className="lg:col-span-7">
                <section className="bg-white p-6 rounded-2xl shadow-sm border border-gray-100">
                    <div className="flex items-center gap-2 mb-6">
                        <Video className="text-[#228B22] w-6 h-6" />
                        <h2 className="text-xl font-bold">Video Ad Storyboard</h2>
                    </div>

                    <div className="space-y-4">
                        {selectedAd.videoScript.map((scene, idx) => (
                        <div key={idx} className="flex gap-4 p-4 bg-gray-50 rounded-xl border border-gray-100 group">
                            <div
                                className="w-16 h-16 bg-[#F5F5DC] rounded-lg border border-gray-200 flex-shrink-0 flex items-center justify-center font-bold text-[#228B22]">
                                {scene.time}
                            </div>
                            <div className="flex-1">
                                <h4 className="text-xs font-bold text-gray-400 uppercase mb-1">Visual Instruction</h4>
                                <p className="text-sm font-medium mb-2">{scene.visual}</p>
                                <h4 className="text-xs font-bold text-gray-400 uppercase mb-1">Audio/Voiceover</h4>
                                <p className="text-sm text-[#228B22] italic">"{scene.audio}"</p>
                            </div>
                        </div>
                        ))}
                    </div>
                </section>
            </div>

            <div className="lg:col-span-5">
                <section className="bg-[#228B22] text-white p-6 rounded-2xl shadow-lg">
                    <div className="flex items-center gap-2 mb-4">
                        <MonitorPlay className="w-5 h-5" />
                        <h2 className="text-lg font-bold">Video Production Prompt</h2>
                    </div>
                    <p className="text-sm leading-relaxed mb-6 opacity-90">
                        Copy this prompt to use with high-end AI video generators to create your perfect 15-second
                        Facebook ad.
                    </p>
                    <div className="bg-[#1a6b1a] p-4 rounded-xl text-xs font-mono leading-relaxed mb-4">
                        "A professional 4K video montage for a full-stack agency. Palette: solid forest green (#228B22)
                        and cream (#F5F5DC). Smooth, flat-lay transitions over websites: Pathfinder AI, MC Beverly
                        Hills, RHQ Services. No gradients, no shadows. Clean code snippets in PHP and JS appearing on
                        solid cream panels. Minimalist, bright, and sharp aesthetic. Ends with LISH logo in bold green
                        on cream."
                    </div>
                    <button onClick={()=> handleCopy("A professional 4K video montage for a full-stack agency. Palette:
                        solid forest green (#228B22) and cream (#F5F5DC). Smooth, flat-lay transitions over websites:
                        Pathfinder AI, MC Beverly Hills, RHQ Services. No gradients, no shadows. Clean code snippets in
                        PHP and JS appearing on solid cream panels. Minimalist, bright, and sharp aesthetic. Ends with
                        LISH logo in bold green on cream.")}
                        className="w-full py-3 bg-white text-[#228B22] font-bold rounded-xl flex items-center
                        justify-center gap-2 hover:bg-[#F5F5DC] transition-all"
                        >
                        <Copy size={16} /> Copy Video Prompt
                    </button>
                </section>
            </div>
        </div>
        )}

        {activeTab === 'creative' && (
        <div className="flex flex-col md:flex-row gap-8">
            <div className="md:w-1/2 flex justify-center">
                <div
                    className="w-full max-w-sm bg-white border border-gray-200 rounded-lg overflow-hidden shadow-xl self-start">
                    <div className="p-3 flex items-center gap-2">
                        <div
                            className="w-8 h-8 bg-[#228B22] rounded-full flex items-center justify-center text-white text-xs font-bold">
                            L</div>
                        <div>
                            <h4 className="text-sm font-bold">LISH Agency</h4>
                            <p className="text-[10px] text-gray-500">Sponsored • Public</p>
                        </div>
                    </div>
                    <div className="px-3 py-2">
                        <p className="text-sm leading-snug line-clamp-3">{selectedAd.primaryText}</p>
                    </div>
                    <div className="bg-gray-100 aspect-[1.91/1] flex items-center justify-center relative">
                        {generatedImage ? (
                        <img src={generatedImage} alt="Ad Visual" className="w-full h-full object-cover" />
                        ) : (
                        <div className="text-center p-6">
                            <ImageIcon className="w-12 h-12 text-gray-300 mx-auto mb-2" />
                            <p className="text-xs text-gray-400">Static Carousel/Image Preview</p>
                        </div>
                        )}
                        {generating && (
                        <div className="absolute inset-0 bg-white/80 flex flex-col items-center justify-center">
                            <RefreshCw className="w-8 h-8 text-[#228B22] animate-spin mb-2" />
                            <p className="text-xs font-bold text-[#228B22]">Generating Solid Asset...</p>
                        </div>
                        )}
                    </div>
                    <div className="p-3 bg-[#F5F5DC] flex justify-between items-center border-t border-gray-100">
                        <div className="flex-1 pr-4">
                            <p className="text-[10px] text-[#228B22] font-bold uppercase tracking-wider">LISH.COM.NG</p>
                            <h4 className="text-sm font-bold text-gray-800 line-clamp-1">{selectedAd.headline}</h4>
                        </div>
                        <button
                            className="bg-white border border-gray-300 px-4 py-1.5 rounded text-sm font-bold shadow-sm">
                            {selectedAd.cta.split(' ')[0]}
                        </button>
                    </div>
                </div>
            </div>

            <div className="md:w-1/2 space-y-6">
                <div className="bg-white p-6 rounded-2xl shadow-sm border border-gray-100">
                    <h3 className="text-lg font-bold mb-4 flex items-center gap-2">
                        <Sparkles className="text-[#228B22]" size={20} />
                        Static Creative Engine
                    </h3>
                    <p className="text-sm text-gray-500 mb-6 leading-relaxed">
                        While the <strong>Video tab</strong> provides your motion strategy, use this tool to generate
                        supporting static images for Facebook Carousel ads using your exact <strong>Green &
                            Cream</strong> specifications.
                    </p>

                    <button onClick={generateImage} disabled={generating} className={`w-full py-4 rounded-xl font-bold
                        flex items-center justify-center gap-2 transition-all ${generating
                        ? 'bg-gray-100 text-gray-400 cursor-not-allowed'
                        : 'bg-[#228B22] text-white hover:bg-[#1a6b1a] shadow-lg hover:shadow-xl' }`}>
                        {generating ? 'Processing Branded Visual...' : 'Generate Branded Image'}
                    </button>

                    {error && <p className="mt-4 text-xs text-red-500 text-center">{error}</p>}

                    <div className="mt-8 grid grid-cols-3 gap-4 border-t border-gray-100 pt-8 text-center">
                        <div>
                            <div className="bg-gray-50 p-2 rounded-lg mb-2">
                                <Layout size={18} className="mx-auto text-gray-400" />
                            </div>
                            <p className="text-[10px] font-bold text-gray-400 uppercase">Single</p>
                        </div>
                        <div>
                            <div className="bg-gray-50 p-2 rounded-lg mb-2">
                                <Code2 size={18} className="mx-auto text-gray-400" />
                            </div>
                            <p className="text-[10px] font-bold text-gray-400 uppercase">Carousel</p>
                        </div>
                        <div>
                            <div className="bg-gray-50 p-2 rounded-lg mb-2">
                                <Eye size={18} className="mx-auto text-gray-400" />
                            </div>
                            <p className="text-[10px] font-bold text-gray-400 uppercase">Lead</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        )}
    </main>

    <footer className="max-w-6xl mx-auto mt-12 pb-8 text-center border-t border-gray-100 pt-8">
        <p className="text-xs text-gray-400 tracking-widest uppercase">LISH AGENCY • FULL-STACK SOLUTIONS</p>
    </footer>
</div>
);
};

export default App;